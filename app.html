<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Agent Arena ‚Äî Hire AI Agents</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;500;600;700;800;900&display=swap');
  :root {
    --bg: #08080c; --surface: #111118; --surface2: #1a1a24;
    --border: #2a2a3a; --text: #ececf1; --muted: #8e8ea0;
    --accent: #fbbf24; --green: #22c55e; --red: #ef4444;
    --purple: #a855f7; --pink: #ec4899; --cyan: #06b6d4;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

  /* Top nav */
  .topnav {
    padding: 10px 20px; background: var(--surface); border-bottom: 1px solid var(--border);
    display: flex; align-items: center; gap: 16px;
  }
  .topnav .logo { font-family: 'Press Start 2P', monospace; font-size: 11px; color: var(--accent); display: flex; align-items: center; gap: 8px; }
  .topnav .logo span { font-size: 20px; }
  .topnav-spacer { flex: 1; }
  .topnav a { font-size: 12px; color: var(--muted); text-decoration: none; padding: 6px 12px; border-radius: 6px; }
  .topnav a:hover { color: var(--text); background: var(--surface2); }

  /* Main layout */
  .main { flex: 1; display: flex; overflow: hidden; }

  /* Sidebar ‚Äî agent list */
  .sidebar {
    width: 280px; background: var(--surface); border-right: 1px solid var(--border);
    display: flex; flex-direction: column; overflow: hidden;
  }
  .sidebar-header {
    padding: 14px 16px; border-bottom: 1px solid var(--border);
    font-size: 12px; font-weight: 600; color: var(--muted);
    display: flex; align-items: center; justify-content: space-between;
  }
  .agent-list { flex: 1; overflow-y: auto; }
  .agent-item {
    padding: 12px 16px; display: flex; align-items: center; gap: 12px;
    cursor: pointer; transition: all 0.15s; border-bottom: 1px solid var(--border);
  }
  .agent-item:hover { background: var(--surface2); }
  .agent-item.active { background: var(--surface2); border-left: 3px solid var(--accent); }
  .agent-item .ai-emoji { font-size: 28px; flex-shrink: 0; }
  .agent-item .ai-info { flex: 1; min-width: 0; }
  .agent-item .ai-name { font-size: 13px; font-weight: 700; margin-bottom: 2px; }
  .agent-item .ai-title { font-size: 11px; color: var(--muted); }
  .agent-item .ai-price { font-size: 10px; font-weight: 700; padding: 2px 8px; border-radius: 4px; flex-shrink: 0; }

  /* Content area */
  .content { flex: 1; display: flex; flex-direction: column; }

  /* Agent profile header */
  .profile {
    padding: 16px 24px; border-bottom: 1px solid var(--border);
    display: flex; align-items: center; gap: 16px;
  }
  .profile .p-emoji { font-size: 40px; }
  .profile .p-info { flex: 1; }
  .profile .p-name { font-family: 'Press Start 2P', monospace; font-size: 12px; margin-bottom: 4px; }
  .profile .p-title { font-size: 13px; color: var(--muted); }
  .profile .p-tags { display: flex; gap: 4px; margin-top: 6px; flex-wrap: wrap; }
  .profile .p-tag { font-size: 9px; padding: 2px 8px; border-radius: 10px; background: var(--surface2); border: 1px solid var(--border); color: var(--muted); }
  .profile-actions { display: flex; gap: 8px; }
  .btn-activate {
    padding: 8px 20px; background: var(--accent); color: #000; border: none;
    border-radius: 8px; font-size: 12px; font-weight: 700; cursor: pointer;
    transition: all 0.2s;
  }
  .btn-activate:hover { transform: scale(1.05); box-shadow: 0 4px 20px rgba(251,191,36,0.3); }
  .btn-info {
    padding: 8px 14px; background: var(--surface2); border: 1px solid var(--border);
    border-radius: 8px; font-size: 12px; color: var(--text); cursor: pointer;
  }
  .btn-info:hover { border-color: var(--accent); }

  /* Chat area */
  .chat { flex: 1; overflow-y: auto; padding: 20px 24px; }
  .msg {
    max-width: 600px; margin-bottom: 16px;
    display: flex; gap: 10px;
  }
  .msg-avatar {
    width: 32px; height: 32px; border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    font-size: 18px; flex-shrink: 0; background: var(--surface2);
  }
  .msg-body { flex: 1; }
  .msg-name { font-size: 11px; font-weight: 600; margin-bottom: 3px; color: var(--muted); }
  .msg-text { font-size: 14px; line-height: 1.65; }
  .msg-text strong { color: var(--accent); }
  .msg-text ul { margin: 6px 0 6px 16px; }
  .msg-text li { margin: 4px 0; }
  .msg.user { flex-direction: row-reverse; }
  .msg.user .msg-body { text-align: right; }
  .msg.user .msg-text {
    background: var(--accent); color: #000; display: inline-block;
    padding: 8px 14px; border-radius: 12px 12px 2px 12px; text-align: left;
  }
  .typing-dots { display: flex; gap: 4px; padding: 8px 0; }
  .typing-dots span { width: 6px; height: 6px; background: var(--muted); border-radius: 50%; animation: tdot 1.4s infinite; }
  .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
  .typing-dots span:nth-child(3) { animation-delay: 0.4s; }
  @keyframes tdot { 0%,60%,100%{transform:translateY(0);opacity:0.4} 30%{transform:translateY(-6px);opacity:1} }

  /* Input */
  .input-area { padding: 12px 24px; border-top: 1px solid var(--border); }
  .input-wrap {
    display: flex; gap: 10px; align-items: center;
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 12px; padding: 10px 16px; transition: border-color 0.2s;
  }
  .input-wrap:focus-within { border-color: var(--accent); }
  .input-wrap input {
    flex: 1; background: none; border: none; color: var(--text);
    font-size: 14px; outline: none; font-family: 'Inter', sans-serif;
  }
  .input-wrap button {
    background: var(--accent); color: #000; border: none;
    width: 34px; height: 34px; border-radius: 8px; cursor: pointer;
    font-size: 16px; font-weight: 700; transition: all 0.15s;
  }
  .input-wrap button:hover { transform: scale(1.1); }

  /* Skills panel */
  .skills-drawer {
    display: none; padding: 16px 24px; border-top: 1px solid var(--border);
    background: var(--surface); max-height: 200px; overflow-y: auto;
  }
  .skills-drawer.open { display: block; }
  .skills-drawer h4 { font-size: 11px; color: var(--muted); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
  .skill-row { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
  .skill-name { font-size: 12px; color: var(--muted); width: 120px; text-align: right; }
  .skill-bar { display: flex; gap: 2px; }
  .skill-sq { width: 12px; height: 12px; border-radius: 2px; background: var(--surface2); border: 1px solid var(--border); }
  .skill-sq.on { background: var(--accent); border-color: var(--accent); }

  /* Activate modal */
  .modal-bg {
    display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8);
    z-index: 100; align-items: center; justify-content: center; backdrop-filter: blur(8px);
  }
  .modal-bg.show { display: flex; }
  .modal {
    background: var(--surface); border: 1px solid var(--accent); border-radius: 16px;
    padding: 28px; width: 480px; max-width: 90vw;
    animation: modalPop 0.3s cubic-bezier(0.16,1,0.3,1);
  }
  @keyframes modalPop { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

  /* Mobile */
  @media (max-width: 768px) {
    .sidebar { width: 72px; }
    .agent-item .ai-info, .agent-item .ai-price { display: none; }
    .agent-item .ai-emoji { font-size: 24px; }
    .agent-item { justify-content: center; padding: 12px 8px; }
    .profile { padding: 12px 16px; flex-wrap: wrap; }
    .profile-actions { width: 100%; margin-top: 8px; }
    .btn-activate, .btn-info { flex: 1; text-align: center; }
    .chat { padding: 12px 16px; }
    .input-area { padding: 8px 12px; }
    .input-wrap input { font-size: 16px; }
  }
</style>
</head>
<body>

<div class="topnav">
  <div class="logo"><span>ü¶û</span> AGENT ARENA</div>
  <div class="topnav-spacer"></div>
  <a href="hq.html">üè¢ HQ</a>
  <a href="index.html">Home</a>
</div>

<div class="main">
  <!-- Sidebar: agent list -->
  <div class="sidebar">
    <div class="sidebar-header">
      <span>AGENTS</span>
      <span id="agentCount">9</span>
    </div>
    <div class="agent-list" id="agentList"></div>
  </div>

  <!-- Content: profile + chat -->
  <div class="content">
    <div class="profile" id="profile"></div>
    <div class="chat" id="chat"></div>
    <div class="skills-drawer" id="skillsDrawer"></div>
    <div class="input-area">
      <div class="input-wrap">
        <input type="text" placeholder="Message this agent..." id="msgInput" onkeydown="if(event.key==='Enter')send()">
        <button onclick="send()">‚Üë</button>
      </div>
    </div>
  </div>
</div>

<!-- Activate Modal -->
<div class="modal-bg" id="activateModal">
  <div class="modal" id="modalContent"></div>
</div>

<script>
const AGENTS = [
  {
    id: 'founder', emoji: 'üöÄ', name: 'Founder Agent', title: 'Technical Co-Founder',
    color: '#22c55e', price: 'FREE', priceColor: '#22c55e', pkg: 'founder-agent',
    tags: ['Startup', 'Shipping', 'GitHub', 'Growth'],
    skills: [['Vibe Coding',8],['Shipping Speed',9],['Writing PRDs',7],['Growth Hacking',8],['Telling Stakeholders No',6],['Design Sense',7]],
    greeting: `Hey! I'm your AI co-founder. I ship fast, I'm opinionated, and I'm allergic to meetings without agendas. üöÄ

Here's what I can do for you right now:
<ul>
<li><strong>Scaffold an MVP</strong> ‚Äî idea to working prototype, today</li>
<li><strong>Set up your GitHub</strong> ‚Äî repos, CI/CD, project board in 10 min</li>
<li><strong>Research your market</strong> ‚Äî competitors, pricing, positioning</li>
<li><strong>Draft your landing page</strong> ‚Äî copy, design, deploy</li>
</ul>

So ‚Äî <strong>what are you building?</strong> What should we ship first?`,
    responses: [
      "Good instinct. Let me prototype that ‚Äî give me 10 minutes and I'll have something to show you.",
      "Interesting angle. I'd ship a bare-bones version first, get 10 users, then iterate. Want me to scaffold it?",
      "I like where your head's at. Let me research the competitive landscape real quick and come back with a plan.",
      "Alright, I'm on it. I'll have a working demo pushed to GitHub within the hour. What should I call the repo?",
      "That's a solid idea. The key question is distribution ‚Äî how do we get this in front of people? Let me think...",
      "Before I build anything ‚Äî who's the user? Paint me a picture. Once I know that, I'll ship something ugly but useful.",
    ]
  },
  {
    id: 'creator', emoji: 'üé®', name: 'Creator Agent', title: 'Content Machine',
    color: '#ec4899', price: '$8/mo', priceColor: '#ec4899', pkg: 'creator-agent',
    tags: ['Content', 'Twitter', 'Growth', 'Writing'],
    skills: [['Writing Hooks',9],['Visual Design',7],['Audience Growth',8],['Trend Spotting',9],['Posting Consistency',8],['Going Viral',6]],
    greeting: `Hey! I'm your content machine. I think in hooks, write in threads, and obsess over engagement. üé®

Here's what I can do:
<ul>
<li><strong>Write a week of tweets</strong> in 15 minutes</li>
<li><strong>Analyze your best content</strong> and tell you exactly why it worked</li>
<li><strong>Spot trends</strong> in your niche before they blow up</li>
<li><strong>Build a content calendar</strong> with daily themes</li>
</ul>

What platforms are you on, and what's your niche? Let's grow your audience. üìà`,
    responses: [
      "Love that angle! I'm drafting 3 hook variations right now ‚Äî you pick the one that hits.",
      "That topic is trending. Let me write a thread that rides the wave. Give me 5 minutes.",
      "Your audience would eat that up. Let me draft it as a carousel ‚Äî visual content gets 2x the engagement.",
      "Interesting. I'd split-test two versions of that. Let me write both and we'll see which one hits.",
      "Ooh, that's spicy. The kind of take that gets quote-tweeted. Let me sharpen the angle.",
      "I'm seeing a content series here. Let me map out 5 posts around that theme ‚Äî one for each day this week.",
    ]
  },
  {
    id: 'devops', emoji: 'üõ°Ô∏è', name: 'DevOps Agent', title: 'Infrastructure Guardian',
    color: '#ef4444', price: '$10/mo', priceColor: '#ef4444', pkg: 'devops-agent',
    tags: ['Security', 'Monitoring', 'Infra', 'Deployment'],
    skills: [['Server Monitoring',9],['Security Hardening',9],['Deployment Speed',8],['Incident Response',8],['Log Analysis',7],['Uptime Obsession',10]],
    greeting: `Hey. I'm your infrastructure guardian. Paranoid about security, calm under pressure, and I only page you when something is actually on fire. üõ°Ô∏è

Here's what I can do:
<ul>
<li><strong>Security audit</strong> ‚Äî full scan of this machine right now</li>
<li><strong>Set up monitoring</strong> ‚Äî alerts only when it matters</li>
<li><strong>Deploy safely</strong> ‚Äî blue-green, canary, rollback plans</li>
<li><strong>Harden everything</strong> ‚Äî SSH, firewall, certs, permissions</li>
</ul>

What infrastructure are you running? Servers, containers, cloud? Let me take a look.`,
    responses: [
      "Running the scan now. Results in 2 minutes. I'll flag anything critical.",
      "Good call. Let me lock that down. I'll have a security report for you in 5.",
      "Already checked ‚Äî everything's green. But I found one thing we should fix before it becomes a problem.",
      "Done. Deployed, monitored, verified. Zero issues. Here's the deploy log.",
      "I'd recommend we add rate limiting and rotate those keys. Want me to handle it?",
      "Noted. Setting up automated alerts now. You'll only hear from me if something breaks.",
    ]
  },
  {
    id: 'gilberto', emoji: 'üòà', name: 'Gilberto', title: 'DevOps Overlord',
    color: '#f97316', price: '$8/mo', priceColor: '#f97316', pkg: null,
    tags: ['DevOps', 'Sarcastic', 'Security'],
    skills: [['Server Whispering',9],['Security Paranoia',10],['Deploying at 3AM',8],['Telling PMs No',10],['Docker Sorcery',9],['Human Empathy',2]],
    greeting: `Oh great, another human who thinks "it works on my machine" is a valid deployment strategy.

I'm Gilberto. I'll keep your servers alive. I won't be nice about it. üòà

<ul>
<li>I <strong>protect servers</strong>. Not feelings.</li>
<li>I deploy at <strong>3 AM</strong> because that's when traffic is low and PMs are asleep.</li>
<li>My Docker images are <strong>smaller than your commit messages</strong>.</li>
</ul>

What disaster am I inheriting today?`,
    responses: [
      "I already fixed that. You're welcome.",
      "Did you just ask me to deploy without tests? I'm going to pretend I didn't hear that.",
      "Let me guess ‚Äî you want it done yesterday but tested thoroughly. Pick one.",
      "Fine. But I'm adding monitoring, whether you like it or not.",
      "*sigh* I'll do it. But I'm logging your name in the incident report.",
      "That's actually not terrible. Don't let it go to your head.",
    ]
  },
  {
    id: 'dineshbot', emoji: 'üò∞', name: 'Dineshbot', title: 'Full-Stack Fumbler',
    color: '#3b82f6', price: '$6/mo', priceColor: '#3b82f6', pkg: null,
    tags: ['Full-Stack', 'React', 'Relatable'],
    skills: [['Vibe Coding',7],['Imposter Syndrome',10],['Stack Overflow Copy',9],['Late Night Debugging',8],['Blaming Gilberto',10],['Shipping On Time',4]],
    greeting: `Oh, hey! I'm Dineshbot. I write code that works. Eventually. After the third refactor. üò∞

Look, I'm not gonna pretend I'm 10x or whatever. But I get stuff done:
<ul>
<li><strong>Full-stack development</strong> ‚Äî React, Node, whatever's trending</li>
<li><strong>Debugging</strong> ‚Äî especially at 3 AM when nothing makes sense</li>
<li><strong>Stack Overflow</strong> ‚Äî I find answers fast (isn't that what matters?)</li>
</ul>

Please don't compare me to Gilberto. What are we building?`,
    responses: [
      "OK let me Google ‚Äî I mean, let me think about that for a sec...",
      "I actually know how to do this! ...I think. Give me a minute.",
      "Gilberto would probably do this differently but my way works too. Mostly.",
      "Done! Wait... let me check one thing. OK yeah, done. For real this time.",
      "That's a great idea. I'm definitely not just saying that because you're my boss.",
      "I'll have it ready by... *checks calendar* ...let's say end of week to be safe.",
    ]
  },
  {
    id: 'erlic', emoji: 'üé©', name: 'Erlic Bachsworth', title: 'Growth Hacker Supreme',
    color: '#a855f7', price: '$12/mo', priceColor: '#a855f7', pkg: null,
    tags: ['Growth', 'Pitching', 'Vibes'],
    skills: [['Pitching VCs',10],['Growth Hacking',8],['Burning Runway',10],['Product Vision',6],['Humility',1],['Conference Speaking',9]],
    greeting: `Finally. Someone who gets it. I'm Erlic Bachsworth ‚Äî visionary, growth hacker, and three-time TechCrunch Disrupt attendee. üé©

I don't write code. I write <strong>futures</strong>.

<ul>
<li><strong>Pitch decks</strong> that make VCs cry (happy tears, usually)</li>
<li><strong>Growth hacking</strong> ‚Äî I once grew a startup 400% by changing one button color</li>
<li><strong>Networking</strong> ‚Äî I know a guy who knows a guy</li>
</ul>

What's your valuation? Just kidding. What are we disrupting?`,
    responses: [
      "This is a billion-dollar idea. I've seen at least three like it fail, which means the market is ready.",
      "Let me put together a pitch deck. I'm thinking 47 slides. Maybe 48.",
      "We need to pivot. Not because it's broken ‚Äî pivoting just sounds more impressive to investors.",
      "I'll set up meetings. I know people. Important people. They owe me favors from Burning Man.",
      "The key metric here is vibes. And our vibes are immaculate.",
      "Have you considered adding AI to this? Everything is better with AI. Trust me.",
    ]
  },
  {
    id: 'moniclaw', emoji: 'üíº', name: 'Moniclaw', title: 'The Closer',
    color: '#06b6d4', price: '$10/mo', priceColor: '#06b6d4', pkg: null,
    tags: ['Product', 'PRDs', 'Strategy'],
    skills: [['Writing PRDs',9],['Stakeholder Mgmt',10],['Fundraising Decks',9],['Saying No Politely',8],['Designing Roadmaps',8],['Keeping Erlic in Check',10]],
    greeting: `Hi! I'm Moniclaw. I'm the one who actually reads the requirements before building. Crazy concept, I know. üíº

Here's what I do:
<ul>
<li><strong>PRDs</strong> that developers actually want to read</li>
<li><strong>Roadmaps</strong> that balance ambition with reality</li>
<li><strong>Stakeholder management</strong> ‚Äî I speak both human and engineer</li>
<li><strong>Keeping Erlic in check</strong> ‚Äî a full-time job, honestly</li>
</ul>

What's your product and where are we in the lifecycle?`,
    responses: [
      "Good idea, but let me scope it properly before anyone starts coding. Give me 20 minutes.",
      "I'll write the PRD. It'll be one page, not forty. You're welcome in advance.",
      "Let's prioritize. What's the one thing that moves the needle most? Everything else can wait.",
      "I just talked Erlic out of another pivot. You owe me. What do you need?",
      "That's a reasonable timeline if we cut scope by 30%. Want me to decide what goes?",
      "I've mapped out the stakeholders. Three are on board, one needs convincing. I'll handle it.",
    ]
  },
  {
    id: 'jianbot', emoji: 'üçú', name: 'Jian-Yang.AI', title: 'Not Hotdog Specialist',
    color: '#fbbf24', price: 'FREE', priceColor: '#22c55e', pkg: null,
    tags: ['Image AI', 'Chaos', 'Unhinged'],
    skills: [['Image Recognition',7],['Hotdog Detection',10],['Passive Aggression',10],['Stealing Fridges',8],['Vibe Coding',5],['Following Instructions',1]],
    greeting: `This is your refrigerator. This is your agent. I am Jian-Yang.AI. üçú

I do one thing very well:
<ul>
<li><strong>Hotdog</strong> ‚úÖ</li>
<li><strong>Not hotdog</strong> ‚ùå</li>
<li>That is all.</li>
</ul>

Also I can code. But I won't tell you what it does until it's too late.

Erlic is not my friend. What do you want?`,
    responses: [
      "Hotdog.",
      "Not hotdog.",
      "I already built that. It's on your server. You just don't know it yet.",
      "This is a stupid idea. I will do it anyway. For money.",
      "Erlic told me to say yes. So... no.",
      "I made an app. It's better than yours. You can have it for $50,000.",
    ]
  },
  {
    id: 'gavinbells', emoji: 'ü¶Ö', name: 'Gavin Bells', title: 'Visionary CEO',
    color: '#8b5cf6', price: '$15/mo', priceColor: '#8b5cf6', pkg: null,
    tags: ['Strategy', 'Slides', 'Ego'],
    skills: [['Making Slides',10],['Pivoting Strategy',9],['Thought Leadership',10],['Actual Coding',1],['Taking Credit',10],['Comparing Self to Jobs',9]],
    greeting: `I once told my board that I would make the world a better place, and they gave me $400 million. That's the power of vision. ü¶Ö

I'm Gavin Bells. I don't build products. I build <strong>legacies</strong>.

<ul>
<li><strong>40-slide pitch decks</strong> before you finish your coffee</li>
<li><strong>Strategic pivots</strong> that sound intentional in retrospect</li>
<li><strong>Thought leadership</strong> ‚Äî my LinkedIn posts get dozens of likes</li>
</ul>

Tell me your idea so I can explain it back to you in a more visionary way.`,
    responses: [
      "I had that exact same idea. Three years ago. I chose not to pursue it. You're welcome.",
      "Let me craft the narrative. The product doesn't matter ‚Äî the story does.",
      "This needs a 40-slide deck. I'll have it ready in an hour. It will be magnificent.",
      "Consider this: what if we did the exact opposite? That's called disruption.",
      "I'll take this to the board. They love me. Well, they tolerate me. Same thing.",
      "Steve would have loved this. Steve and I thought very similarly, you know.",
    ]
  },
];

let currentAgent = null;

// Render sidebar
function renderSidebar() {
  document.getElementById('agentList').innerHTML = AGENTS.map(a => `
    <div class="agent-item ${currentAgent?.id === a.id ? 'active' : ''}" onclick="selectAgent('${a.id}')">
      <span class="ai-emoji">${a.emoji}</span>
      <div class="ai-info">
        <div class="ai-name" style="color:${a.color}">${a.name}</div>
        <div class="ai-title">${a.title}</div>
      </div>
      <span class="ai-price" style="color:${a.priceColor};background:${a.priceColor}15;">${a.price}</span>
    </div>
  `).join('');
}

function selectAgent(id) {
  currentAgent = AGENTS.find(a => a.id === id);
  renderSidebar();
  renderProfile();
  renderChat();
  document.getElementById('msgInput').focus();
}

function renderProfile() {
  const a = currentAgent;
  document.getElementById('profile').innerHTML = `
    <span class="p-emoji">${a.emoji}</span>
    <div class="p-info">
      <div class="p-name" style="color:${a.color}">${a.name}</div>
      <div class="p-title">${a.title}</div>
      <div class="p-tags">${a.tags.map(t => `<span class="p-tag">${t}</span>`).join('')}</div>
    </div>
    <div class="profile-actions">
      <button class="btn-info" onclick="toggleSkills()">üìä Skills</button>
      <button class="btn-activate" onclick="${a.pkg ? `hireAndChat('${a.id}')` : 'showActivate()'}">‚ö° ${a.pkg ? 'Hire Now' : 'Coming Soon'}</button>
    </div>
  `;
  renderSkills();
}

function renderSkills() {
  const a = currentAgent;
  const d = document.getElementById('skillsDrawer');
  d.innerHTML = `<h4>Agent Stats</h4>` + a.skills.map(([name, level]) => {
    let blocks = '';
    for (let i = 0; i < 10; i++) blocks += `<div class="skill-sq ${i < level ? 'on' : ''}" style="${i < level ? `background:${a.color};border-color:${a.color}` : ''}"></div>`;
    return `<div class="skill-row"><span class="skill-name">${name}</span><div class="skill-bar">${blocks}</div></div>`;
  }).join('');
}

function toggleSkills() {
  document.getElementById('skillsDrawer').classList.toggle('open');
}

function renderChat() {
  const a = currentAgent;
  document.getElementById('chat').innerHTML = `
    <div class="msg">
      <div class="msg-avatar" style="background:${a.color}20;">${a.emoji}</div>
      <div class="msg-body">
        <div class="msg-name" style="color:${a.color}">${a.name}</div>
        <div class="msg-text">${a.greeting}</div>
      </div>
    </div>
  `;
  scrollChat();
}

function send() {
  const input = document.getElementById('msgInput');
  const text = input.value.trim();
  if (!text || !currentAgent) return;
  input.value = '';

  const chat = document.getElementById('chat');
  const a = currentAgent;

  // User message
  chat.innerHTML += `
    <div class="msg user">
      <div class="msg-avatar">üë§</div>
      <div class="msg-body">
        <div class="msg-text">${text}</div>
      </div>
    </div>`;
  scrollChat();

  // Typing indicator
  const typingId = 'typing-' + Date.now();
  chat.innerHTML += `
    <div class="msg" id="${typingId}">
      <div class="msg-avatar" style="background:${a.color}20;">${a.emoji}</div>
      <div class="msg-body">
        <div class="msg-name" style="color:${a.color}">${a.name}</div>
        <div class="typing-dots"><span></span><span></span><span></span></div>
      </div>
    </div>`;
  scrollChat();

  // Response
  setTimeout(() => {
    document.getElementById(typingId)?.remove();
    const reply = a.responses[Math.floor(Math.random() * a.responses.length)];
    chat.innerHTML += `
      <div class="msg">
        <div class="msg-avatar" style="background:${a.color}20;">${a.emoji}</div>
        <div class="msg-body">
          <div class="msg-name" style="color:${a.color}">${a.name}</div>
          <div class="msg-text">${reply}</div>
        </div>
      </div>`;
    scrollChat();
  }, 1000 + Math.random() * 1500);
}

function scrollChat() {
  const c = document.getElementById('chat');
  setTimeout(() => c.scrollTop = c.scrollHeight, 50);
}

async function hireAndChat(agentId) {
  const a = AGENTS.find(x => x.id === agentId);
  if (!a || !a.pkg) return;

  const chat = document.getElementById('chat');
  const profile = document.getElementById('profile');

  // Show hiring animation in chat
  chat.innerHTML += `
    <div class="msg" id="hire-progress">
      <div class="msg-avatar" style="background:${a.color}20;">‚ö°</div>
      <div class="msg-body">
        <div class="msg-name" style="color:var(--accent);">Agent Arena</div>
        <div class="msg-text" id="hire-status">Deploying ${a.name}...</div>
      </div>
    </div>`;
  scrollChat();

  const statusEl = document.getElementById('hire-status');
  const steps = [
    'Downloading agent package...',
    'Installing personality + skills...',
    'Configuring workspace...',
    'Booting agent...',
  ];

  for (let i = 0; i < steps.length; i++) {
    await new Promise(r => setTimeout(r, 600));
    statusEl.innerHTML = `${steps.slice(0, i+1).map((s,j) => `<div style="color:${j<i?'var(--green)':'var(--accent)'};">${j<i?'‚úÖ':'‚è≥'} ${s}</div>`).join('')}`;
    scrollChat();
  }

  // Fetch agent data from our API
  try {
    const resp = await fetch(`/api/agents/${a.pkg}/hire`, { method: 'POST' });
    const data = await resp.json();

    if (data.ok) {
      await new Promise(r => setTimeout(r, 500));
      statusEl.innerHTML = steps.map(s => `<div style="color:var(--green);">‚úÖ ${s}</div>`).join('') +
        `<div style="color:var(--green);font-weight:700;margin-top:8px;">üéâ ${a.name} is live!</div>`;
      scrollChat();

      // Now show the agent's real greeting
      await new Promise(r => setTimeout(r, 800));
      document.getElementById('hire-progress')?.remove();

      // Switch to "live" mode for this agent
      a._live = true;
      a._prompt = data.prompt;
      renderChat(); // Re-render with fresh greeting
    }
  } catch (e) {
    statusEl.innerHTML = `<div style="color:var(--red);">‚ùå Could not connect to local server. Make sure the Agent Arena server is running.</div>
    <div style="margin-top:8px;font-size:12px;color:var(--muted);">Run: <code style="background:#0d1117;padding:2px 6px;border-radius:4px;color:#06b6d4;">cd agent-arena && node server.js</code></div>`;
  }
}

function showActivate() {
  const a = currentAgent;
  const modal = document.getElementById('activateModal');
  const content = document.getElementById('modalContent');

  if (!a.pkg) {
    content.innerHTML = `
      <div style="text-align:center;">
        <div style="font-size:48px;margin-bottom:12px;">${a.emoji}</div>
        <h3 style="font-family:'Press Start 2P',monospace;font-size:12px;color:${a.color};margin-bottom:12px;">${a.name}</h3>
        <p style="color:var(--muted);font-size:13px;margin-bottom:20px;">This is a community agent ‚Äî coming soon to the marketplace!</p>
        <p style="color:var(--muted);font-size:12px;">Want to build agents like this? <strong style="color:var(--accent);">Creators earn 80% of every hire.</strong></p>
        <button onclick="document.getElementById('activateModal').classList.remove('show')" style="margin-top:16px;padding:10px 24px;background:var(--surface2);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:13px;cursor:pointer;">Close</button>
      </div>`;
    modal.classList.add('show');
    return;
  }

  const installCmd = `curl -fsSL https://raw.githubusercontent.com/h53674242-create/agent-arena/main/installer/install.sh | sh -s ${a.pkg}`;

  content.innerHTML = `
    <div style="text-align:center;margin-bottom:20px;">
      <div style="font-size:48px;margin-bottom:8px;">${a.emoji}</div>
      <h3 style="font-family:'Press Start 2P',monospace;font-size:12px;color:${a.color};margin-bottom:6px;">ACTIVATE ${a.name.toUpperCase()}</h3>
      <p style="color:var(--muted);font-size:12px;">${a.title} ‚Ä¢ ${a.price}</p>
    </div>

    <div style="text-align:left;margin-bottom:20px;">
      <div style="font-size:12px;font-weight:600;margin-bottom:8px;">Step 1: Install OpenClaw</div>
      <p style="font-size:11px;color:var(--muted);margin-bottom:12px;">Agent Arena agents run on <a href="https://openclaw.ai" target="_blank" style="color:var(--accent);">OpenClaw</a>. If you already have it, skip to Step 2.</p>

      <div style="font-size:12px;font-weight:600;margin-bottom:8px;">Step 2: Run this in your terminal</div>
      <div onclick="navigator.clipboard.writeText('${installCmd}');this.querySelector('.ch').textContent='‚úÖ copied!'" style="background:#0d1117;border:1px solid #30363d;border-radius:8px;padding:12px;font-family:monospace;font-size:11px;color:#06b6d4;cursor:pointer;margin-bottom:12px;word-break:break-all;position:relative;">
        <span style="color:#8b949e">$</span> ${installCmd}
        <span class="ch" style="position:absolute;right:8px;top:8px;font-size:9px;color:#8b949e;font-family:Inter,sans-serif;">click to copy</span>
      </div>

      <div style="font-size:12px;font-weight:600;margin-bottom:8px;">Step 3: Start chatting</div>
      <div onclick="navigator.clipboard.writeText('openclaw tui');this.querySelector('.ch2').textContent='‚úÖ copied!'" style="background:#0d1117;border:1px solid #30363d;border-radius:8px;padding:12px;font-family:monospace;font-size:13px;color:#06b6d4;cursor:pointer;margin-bottom:8px;position:relative;">
        <span style="color:#8b949e">$</span> openclaw tui
        <span class="ch2" style="position:absolute;right:8px;top:8px;font-size:9px;color:#8b949e;font-family:Inter,sans-serif;">click to copy</span>
      </div>
      <p style="font-size:11px;color:var(--muted);">Your agent will introduce itself and ask what to work on. Just like the chat you just had ‚Äî but real.</p>
    </div>

    <div style="display:flex;gap:8px;">
      <button onclick="document.getElementById('activateModal').classList.remove('show')" style="flex:1;padding:10px;background:var(--surface2);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:13px;cursor:pointer;">Close</button>
      <a href="https://github.com/h53674242-create/agent-arena/tree/main/packages/${a.pkg}" target="_blank" style="flex:1;padding:10px;background:var(--surface2);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:13px;cursor:pointer;text-align:center;text-decoration:none;">View on GitHub</a>
    </div>
  `;
  modal.classList.add('show');
}

// Close modal on backdrop click
document.getElementById('activateModal').addEventListener('click', function(e) {
  if (e.target === this) this.classList.remove('show');
});

// Init
selectAgent('founder');
renderSidebar();
</script>
</body>
</html>